{"type":"operationStart","subtype":"profile","data":{"_id":"1pkpBAJd8HPAjmAx","timestamp":"2023-11-03T11:06:49.677Z","state":"queued","mode":"standard","creationDate":"2023-11-03T11:06:49.680Z","modificationDate":"2023-11-03T11:06:49.680Z","shortid":"0zGa944","$entitySet":"profiles"},"doDiffs":false,"timestamp":1699009609679,"id":"971rk397dhasvvb","previousOperationId":null,"operationId":"7dg2j8imdy4xtvs"}
{"type":"log","level":"info","message":"Render request 244 queued for execution and waiting for available worker","previousOperationId":"7dg2j8imdy4xtvs","timestamp":1699009609680,"id":"jziutabcxje7bmh"}
{"type":"operationStart","subtype":"render","name":"main","previousOperationId":"7dg2j8imdy4xtvs","timestamp":1699009609691,"id":"ogrti8u0ayt6w1y","previousEventId":"971rk397dhasvvb","operationId":"gngd3ehwzh5x507"}
{"type":"log","timestamp":1699009609692,"level":"info","message":"Starting rendering request 244","meta":{"rootId":"mrt7kaz9gihfz37","id":"mrt7kaz9gihfz37"},"id":"3k0mdydyg69qzty","previousOperationId":"gngd3ehwzh5x507"}
{"type":"log","timestamp":1699009609692,"level":"info","message":"Rendering template { name: main, recipe: html, engine: handlebars, preview: true }","meta":{"rootId":"mrt7kaz9gihfz37","id":"mrt7kaz9gihfz37"},"id":"kbdkedeqr251ool","previousOperationId":"gngd3ehwzh5x507"}
{"type":"log","timestamp":1699009609692,"level":"debug","message":"Adding sample data xOo8CoQnV","meta":{"rootId":"mrt7kaz9gihfz37","id":"mrt7kaz9gihfz37"},"id":"dn468274ubbwzwe","previousOperationId":"gngd3ehwzh5x507"}
{"type":"log","timestamp":1699009609693,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"mrt7kaz9gihfz37","id":"mrt7kaz9gihfz37"},"id":"6dfnf1irr9vep67","previousOperationId":"gngd3ehwzh5x507"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1699009609693,"id":"kt7pg8nyxmvmdjo","previousEventId":"ogrti8u0ayt6w1y","operationId":"klpuf6h0ox16vmx","previousOperationId":"gngd3ehwzh5x507"}
{"type":"log","timestamp":1699009609693,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"mrt7kaz9gihfz37","id":"mrt7kaz9gihfz37"},"id":"tt98antto00sxma","previousOperationId":"klpuf6h0ox16vmx"}
{"type":"operationStart","subtype":"render","name":"proposed-portfolio","previousOperationId":"klpuf6h0ox16vmx","timestamp":1699009609707,"id":"ikmpk7wnfjj2u1y","previousEventId":"kt7pg8nyxmvmdjo","operationId":"0qjjawo2ny7e7wd"}
{"type":"log","timestamp":1699009609708,"level":"info","message":"Starting rendering (child) request","meta":{"rootId":"mrt7kaz9gihfz37","id":"lfx5hp8ptlx1yes"},"id":"u3ilakk24rziamy","previousOperationId":"0qjjawo2ny7e7wd"}
{"type":"log","timestamp":1699009609708,"level":"info","message":"Rendering template { name: proposed-portfolio, recipe: html, engine: handlebars, preview: true }","meta":{"rootId":"mrt7kaz9gihfz37","id":"lfx5hp8ptlx1yes"},"id":"w5cpmobe97jv2hn","previousOperationId":"0qjjawo2ny7e7wd"}
{"type":"log","timestamp":1699009609708,"level":"debug","message":"Inline data specified.","meta":{"rootId":"mrt7kaz9gihfz37","id":"lfx5hp8ptlx1yes"},"id":"etr6sc6783k39ff","previousOperationId":"0qjjawo2ny7e7wd"}
{"type":"log","timestamp":1699009609710,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"mrt7kaz9gihfz37","id":"lfx5hp8ptlx1yes"},"id":"37ewf5rgu9089l8","previousOperationId":"0qjjawo2ny7e7wd"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1699009609710,"id":"4mm74qmhii7ehyl","previousEventId":"ikmpk7wnfjj2u1y","operationId":"z3ipe4hef201l14","previousOperationId":"0qjjawo2ny7e7wd"}
{"type":"log","timestamp":1699009609710,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"mrt7kaz9gihfz37","id":"lfx5hp8ptlx1yes"},"id":"bhlyr7tsapmzn02","previousOperationId":"z3ipe4hef201l14"}
{"type":"log","timestamp":1699009609731,"level":"warn","message":"Error when processing (child) render request\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n\n(mainHelper.js line 34:17)\n\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n  33 |   number = number?.toFixed(decimalPlaces);\n> 34 |   return number.toLocaleString();\n     |                 ^\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n  37 |             })()\n\n\nTypeError: Cannot read properties of undefined (reading 'toLocaleString')\n    at Object.formatNumber (mainHelper.js:34:17)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:366:23)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:37:49)\nwrapped by:\nError: \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:368:15)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\nwrapped by:\nError: Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async proxy.render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\defaultProxyExtend.js:6:17)\n    at async Object.childTemplate (system-helpers.js:62:15)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)","meta":{"rootId":"mrt7kaz9gihfz37","id":"lfx5hp8ptlx1yes"},"id":"cpb6pljwso8h99n","previousOperationId":"z3ipe4hef201l14"}
{"type":"log","timestamp":1699009609731,"level":"warn","message":"Rendering (child) request finished with error in 54 ms","meta":{"rootId":"mrt7kaz9gihfz37","id":"lfx5hp8ptlx1yes"},"id":"dshtxsj1d9571tz","previousOperationId":"z3ipe4hef201l14"}
{"type":"log","timestamp":1699009609734,"level":"warn","message":"Error when processing render request 244\n(because) error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n\n(mainHelper.js line 34:17)\n\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n  33 |   number = number?.toFixed(decimalPlaces);\n> 34 |   return number.toLocaleString();\n     |                 ^\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n  37 |             })()\n\n\n\n(system-helpers.js line 62:15)\n\n  60 |   const jsreport = require('jsreport-proxy')\n  61 |\n> 62 |   const res = await jsreport.render({\n     |               ^\n  63 |     template: typeof templateNameOrObject === 'string'\n  64 |       ? {\n  65 |           name: templateNameOrObject\n\n\nTypeError: Cannot read properties of undefined (reading 'toLocaleString')\n    at Object.formatNumber (mainHelper.js:34:17)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:366:23)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:37:49)\nwrapped by:\nError: \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:368:15)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\nwrapped by:\nError: Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async proxy.render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\defaultProxyExtend.js:6:17)\n    at async Object.childTemplate (system-helpers.js:62:15)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\nwrapped by:\nError: \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n\n(mainHelper.js line 34:17)\n\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n  33 |   number = number?.toFixed(decimalPlaces);\n> 34 |   return number.toLocaleString();\n     |                 ^\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n  37 |             })()\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:376:15\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\n    at async executionFn (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:225:9)\n    at async run (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:285:14)\nwrapped by:\nError: Error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n\n(mainHelper.js line 34:17)\n\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n  33 |   number = number?.toFixed(decimalPlaces);\n> 34 |   return number.toLocaleString();\n     |                 ^\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n  37 |             })()\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","meta":{"rootId":"mrt7kaz9gihfz37","id":"mrt7kaz9gihfz37"},"id":"v78cn1fs5ltiqzl","previousOperationId":"klpuf6h0ox16vmx"}
{"type":"log","timestamp":1699009609734,"level":"warn","message":"Rendering request 244 finished with error in 57 ms","meta":{"rootId":"mrt7kaz9gihfz37","id":"mrt7kaz9gihfz37"},"id":"bws6ei9jyt3a9c8","previousOperationId":"klpuf6h0ox16vmx"}
{"type":"error","timestamp":1699009609762,"entity":{"shortid":"stSrr3v","name":"mainHelper.js","content":"const vm = require('vm')\r\n\r\nconst interpolate = (tmpl, vars) => {\r\n  return vm.runInNewContext('`' + tmpl + '`' , vars)\r\n}\r\n\r\nasync function localizeExt(key, folder, opts) {\r\n  const v = await localize(key, folder);\r\n  return interpolate(v, opts.hash)\r\n}\r\n\r\nfunction ifEquals(arg1, arg2, options) {\r\n    return (arg1 == arg2) ? options.fn(this) : options.inverse(this);\r\n}\r\n\r\nfunction ifvalue(conditional, options) {\r\n    if (options.hash.value === conditional) {\r\n        return options.fn(this)\r\n    } else {\r\n        return options.inverse(this);\r\n    }\r\n}\r\n\r\nfunction toUpperCase(text) {\r\n  return text.toUpperCase()\r\n}\r\n\r\nfunction toLocaleString(text) {\r\n  return text.toLocaleString();\r\n}\r\n\r\nfunction formatNumber({number, decimalPlaces = 2}) {\r\n  number = number?.toFixed(decimalPlaces);\r\n  return number.toLocaleString();\r\n}"},"lineNumber":34,"property":"content","statusCode":400,"weak":true,"logged":true,"previousOperationId":"klpuf6h0ox16vmx","id":"yjd4hmt24slmga1","stack":"TypeError: Cannot read properties of undefined (reading 'toLocaleString')\n    at Object.formatNumber (mainHelper.js:34:17)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:366:23)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:37:49)\nwrapped by:\nError: \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:368:15)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\nwrapped by:\nError: Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async proxy.render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\defaultProxyExtend.js:6:17)\n    at async Object.childTemplate (system-helpers.js:62:15)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\nwrapped by:\nError: \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n\n(mainHelper.js line 34:17)\n\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n  33 |   number = number?.toFixed(decimalPlaces);\n> 34 |   return number.toLocaleString();\n     |                 ^\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n  37 |             })()\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:376:15\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\n    at async executionFn (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:225:9)\n    at async run (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:285:14)\nwrapped by:\nError: Error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n\n(mainHelper.js line 34:17)\n\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n  33 |   number = number?.toFixed(decimalPlaces);\n> 34 |   return number.toLocaleString();\n     |                 ^\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n  37 |             })()\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","message":"Error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toLocaleString')\n\n(mainHelper.js line 34:17)\n\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n  33 |   number = number?.toFixed(decimalPlaces);\n> 34 |   return number.toLocaleString();\n     |                 ^\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n  37 |             })()\n\n\n\n(system-helpers.js line 62:15)\n\n  60 |   const jsreport = require('jsreport-proxy')\n  61 |\n> 62 |   const res = await jsreport.render({\n     |               ^\n  63 |     template: typeof templateNameOrObject === 'string'\n  64 |       ? {\n  65 |           name: templateNameOrObject\n\n"}
