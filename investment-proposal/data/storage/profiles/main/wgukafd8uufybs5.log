{"type":"operationStart","subtype":"profile","data":{"_id":"5gyojPZeVEtYwg4c","timestamp":"2023-11-03T12:13:01.698Z","state":"queued","mode":"full","creationDate":"2023-11-03T12:13:01.700Z","modificationDate":"2023-11-03T12:13:01.700Z","shortid":"KM4tcNQ","$entitySet":"profiles"},"doDiffs":false,"timestamp":1699013581699,"id":"sv4j08o25vshrtk","previousOperationId":null,"operationId":"upmsp9g4yjoq0i2"}
{"type":"log","level":"info","message":"Render request 278 queued for execution and waiting for available worker","previousOperationId":"upmsp9g4yjoq0i2","timestamp":1699013581699,"id":"cmgyzqvn46si26l"}
{"type":"operationStart","subtype":"render","name":"main","previousOperationId":"upmsp9g4yjoq0i2","timestamp":1699013581711,"id":"jwj4ofm4cs3w2hi","previousEventId":"sv4j08o25vshrtk","operationId":"xyk07wsku4hwe9e","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n@@ -1,0 +1,1 @@\n\\ No newline at end of file\n+{}\n\\ No newline at end of file\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n@@ -1,0 +1,29 @@\n\\ No newline at end of file\n+{\n+  \"template\": {\n+    \"name\": \"main\",\n+    \"recipe\": \"html\",\n+    \"shortid\": \"Hw2LCSRlu\",\n+    \"engine\": \"handlebars\",\n+    \"chrome\": {\n+      \"printBackground\": true,\n+      \"landscape\": false,\n+      \"width\": \"29.7cm\",\n+      \"height\": \"21cm\",\n+      \"waitForNetworkIdle\": true\n+    },\n+    \"creationDate\": \"2023-11-01T14:22:22.876Z\",\n+    \"modificationDate\": \"2023-11-03T10:57:15.113Z\",\n+    \"content\": \"<!DOCTYPE html>\\r\\n<html lang=\\\"en\\\">\\r\\n<head>\\r\\n    <meta charset=\\\"UTF-8\\\">\\r\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\r\\n    <title>Invesment proposal</title>\\r\\n    <!-- Include Tailwind CSS from CDN -->\\r\\n    <link href=\\\"https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css\\\" rel=\\\"stylesheet\\\">\\r\\n    <!-- Include Font Awesome from CDN -->\\r\\n    <link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css\\\">\\r\\n    {{!-- Add Google fonts --}}\\r\\n        <link rel=\\\"preconnect\\\" href=\\\"https://fonts.googleapis.com\\\">\\r\\n        <link rel=\\\"preconnect\\\" href=\\\"https://fonts.gstatic.com\\\" crossorigin>\\r\\n        <link href=\\\"https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400&family=Ubuntu:ital,wght@0,300;0,500;0,700;1,300;1,500;1,700&display=swap\\\" rel=\\\"stylesheet\\\">\\r\\n    <!-- Your custom CSS can go here -->\\r\\n    <style>\\r\\n        {{asset \\\"./styles/main.css\\\"}}\\r\\n    </style>\\r\\n</head>\\r\\n<body>\\r\\n    {{!-- <div class=\\\"container mx-auto p-4\\\">\\r\\n        <h1 class=\\\"text-2xl font-bold text-gray-800 mb-4\\\">Font Awesome & Tailwind CSS Example</h1>\\r\\n        \\r\\n        <div class=\\\"flex items-center space-x-4\\\">\\r\\n            <i class=\\\"fas fa-camera text-2xl text-blue-500\\\"></i>\\r\\n            <p>This is a camera icon from Font Awesome.</p>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"flex items-center space-x-4 mt-4\\\">\\r\\n            <i class=\\\"fas fa-bell text-2xl text-red-500\\\"></i>\\r\\n            <p>This is a bell icon from Font Awesome.</p>\\r\\n        </div>\\r\\n    </div> --}}\\r\\n    {{childTemplate \\\"./templates/proposed-portfolio\\\"}}\\r\\n</body>\\r\\n</html>\\r\\n\",\n+    \"pdfOperations\": [\n+      {\n+        \"type\": \"prepend\",\n+        \"templateShortid\": \"ftMySgGJh\",\n+        \"enabled\": true\n+      }\n+    ],\n+    \"data\": {\n+      \"shortid\": \"xOo8CoQnV\"\n+    }\n+  },\n+  \"data\": {}\n+}\n\\ No newline at end of file\n"}}
{"type":"log","timestamp":1699013581711,"level":"info","message":"Starting rendering request 278","meta":{"rootId":"wgukafd8uufybs5","id":"wgukafd8uufybs5"},"id":"qqwq7i7wywzp4je","previousOperationId":"xyk07wsku4hwe9e"}
{"type":"log","timestamp":1699013581711,"level":"info","message":"Rendering template { name: main, recipe: html, engine: handlebars, preview: true }","meta":{"rootId":"wgukafd8uufybs5","id":"wgukafd8uufybs5"},"id":"1rxmzuu46ohxx9d","previousOperationId":"xyk07wsku4hwe9e"}
{"type":"log","timestamp":1699013581712,"level":"debug","message":"Adding sample data xOo8CoQnV","meta":{"rootId":"wgukafd8uufybs5","id":"wgukafd8uufybs5"},"id":"0dyyr3fhsz6lldb","previousOperationId":"xyk07wsku4hwe9e"}
{"type":"log","timestamp":1699013581713,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"wgukafd8uufybs5","id":"wgukafd8uufybs5"},"id":"9jnw9o0fdt38f1n","previousOperationId":"xyk07wsku4hwe9e"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1699013581713,"id":"b2l41agzpiro8q7","previousEventId":"jwj4ofm4cs3w2hi","operationId":"16wznu9b4czklqg","previousOperationId":"xyk07wsku4hwe9e","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n@@ -1,1 +1,1 @@\n-{}\n\\ No newline at end of file\n+{\"reportName\":\"main\",\"headers\":{}}\n\\ No newline at end of file\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n@@ -4,0 +4,1 @@\n+    \"engine\": \"handlebars\",\n@@ -6,1 +7,0 @@\n-    \"engine\": \"handlebars\",\n@@ -16,0 +16,1 @@\n+    \"_id\": \"syp8GSiC1l3O8XRf\",\n@@ -26,1 +27,2 @@\n-    }\n+    },\n+    \"scripts\": []\n@@ -28,1 +30,519 @@\n-  \"data\": {}\n+  \"data\": {\n+    \"user\": {\n+      \"organizationId\": \"\",\n+      \"id\": \"\",\n+      \"username\": \"\"\n+    },\n+    \"code\": {\n+      \"type\": \"\",\n+      \"value\": \"\"\n+    },\n+    \"client\": {\n+      \"individualId\": \"\",\n+      \"individualFullName\": \"Asterix Bordenca\",\n+      \"clientRelationshipId\": \"\",\n+      \"riskProfile\": \"\",\n+      \"referenceCurrency\": \"\",\n+      \"Locale language\": \"\",\n+      \"managerName\": \"\",\n+      \"advisorName\": \"\",\n+      \"regulatoryClassification\": \"\",\n+      \"isProspect\": \"\",\n+      \"aggregatedPortfoliosRiskGrades\": {\n+        \"before\": \"\",\n+        \"after\": \"\"\n+      }\n+    },\n+    \"portfolio\": {\n+      \"id\": \"\",\n+      \"name\": 1112,\n+      \"mandate\": \"Silver\",\n+      \"strategyProfileId\": \"\",\n+      \"strategyProfile\": 5,\n+      \"strategyProfileName\": \"CHF - Balanced - Gold\",\n+      \"strategyProfileDescription\": \"\",\n+      \"currency\": \"CHF\",\n+      \"marketValue\": 1539542.72,\n+      \"netFortune\": \"\",\n+      \"riskGrade\": 5,\n+      \"isSuitable\": true,\n+      \"healthCheck\": false,\n+      \"constraints\": {\n+        \"bankBreachedConstraints\": [],\n+        \"clientBreachedConstraints\": []\n+      },\n+      \"historicalVolatility\": \"\",\n+      \"historicalReturn\": \"\",\n+      \"ytw\": \"\",\n+      \"duration\": \"\",\n+      \"sellRecommendations\": 0,\n+      \"overallPerformance\": {\n+        \"percentage\": \"%\",\n+        \"returnType\": \"\",\n+        \"amount\": \"\",\n+        \"currency\": \"\",\n+        \"timeFrame\": 3.6\n+      },\n+      \"advisor\": {\n+        \"userName\": \"\",\n+        \"fullName\": \"Beaumont Sebastien\",\n+        \"phoneNumber\": \"\",\n+        \"email\": \"\",\n+        \"office\": {\n+          \"name\": \"\",\n+          \"street\": \"\",\n+          \"zip\": \"\",\n+          \"city\": \"\",\n+          \"country\": \"\"\n+        }\n+      },\n+      \"positions\": [\n+        {\n+          \"sourceId\": \"\",\n+          \"asset\": \"\",\n+          \"assetPriceInPositionCurrency\": {\n+            \"value\": \"\",\n+            \"currency\": \"\",\n+            \"type\": \"\"\n+          },\n+          \"purchaseCost\": \"\",\n+          \"purchaseCurrency\": \"\",\n+          \"performanceAmount\": \"\",\n+          \"performanceCurrency\": \"\",\n+          \"performancePercentage\": \"\",\n+          \"quantity\": \"\",\n+          \"weight\": \"\",\n+          \"marketValue\": \"\",\n+          \"riskContribution\": \"\",\n+          \"ytm\": \"\",\n+          \"ytc\": \"\",\n+          \"ytw\": \"\",\n+          \"duration\": \"\",\n+          \"status\": \"\",\n+          \"groups\": [\n+            {\n+              \"taxonomyId\": \"\",\n+              \"reportSection\": \"\",\n+              \"key\": \"\",\n+              \"label\": \"\",\n+              \"rank\": \"\",\n+              \"level\": \"\"\n+            }\n+          ],\n+          \"recommendations\": [\n+            {\n+              \"level\": \"\",\n+              \"provider\": \"\",\n+              \"type\": \"\",\n+              \"rationale\": \"\"\n+            }\n+          ],\n+          \"assetMetrics\": [\n+            {\n+              \"key\": \"\",\n+              \"name\": \"\",\n+              \"value\": \"\"\n+            }\n+          ]\n+        }\n+      ],\n+      \"liabilities\": [\n+        {\n+          \"label\": \"\",\n+          \"nominalAmount\": \"\",\n+          \"nominalCurrency\": \"\",\n+          \"marketValue\": \"\",\n+          \"dueDate\": \"\",\n+          \"interestRate\": \"\"\n+        }\n+      ],\n+      \"performances\": [\n+        {\n+          \"percentage\": \"\",\n+          \"returnType\": \"\",\n+          \"amount\": \"\",\n+          \"currency\": \"\",\n+          \"timeFrame\": \"\"\n+        }\n+      ],\n+      \"fxRates\": [\n+        {\n+          \"fromCurrency\": \"\",\n+          \"toCurrency\": \"\",\n+          \"rate\": \"\"\n+        }\n+      ],\n+      \"taxons\": [\n+        {\n+          \"taxonId\": \"\",\n+          \"taxonName\": \"\",\n+          \"order\": \"\",\n+          \"taxonomy\": {\n+            \"taxonomyId\": \"\",\n+            \"taxonomyName\": \"\",\n+            \"order\": \"\"\n+          }\n+        }\n+      ]\n+    },\n+    \"proposal\": {\n+      \"id\": \"\",\n+      \"sharedId\": \"\",\n+      \"status\": \"\",\n+      \"generatedAt\": \"July 14, 2020\",\n+      \"createdBy\": \"\",\n+      \"lastModifiedBy\": \"\",\n+      \"lastModifiedAt\": \"\",\n+      \"clonedFromProposalId\": \"\",\n+      \"name\": \"Report business rule - Proposal name\",\n+      \"mandate\": \"\",\n+      \"strategyProfile\": \"\",\n+      \"strategyProfileName\": \"\",\n+      \"strategyProfileDescription\": \"\",\n+      \"netFortune\": \"\",\n+      \"marketValue\": \"\",\n+      \"marketValueCurrency\": \"\",\n+      \"comment\": \"\",\n+      \"riskGrade\": 3,\n+      \"isSuitable\": true,\n+      \"healthCheck\": false,\n+      \"orders\": [\n+        {\n+          \"id\": \"\",\n+          \"lastModifiedAt\": \"\",\n+          \"asset\": {\n+            \"id\": \"\",\n+            \"isin\": \"\",\n+            \"valoren\": \"\",\n+            \"name\": \"\",\n+            \"rationale\": \"\",\n+            \"multipleLinesName\": \"\",\n+            \"currency\": \"\",\n+            \"mainTradingCurrency\": \"\",\n+            \"transactionTaxonName\": \"\",\n+            \"transactionTaxonId\": \"\",\n+            \"assetTypeTaxonName\": \"\",\n+            \"assetTypeTaxonId\": \"\",\n+            \"universeBelongingStatus\": \"\"\n+          },\n+          \"transactionType\": \"buy\",\n+          \"quantity\": \"\",\n+          \"amount\": 786447,\n+          \"weight\": \"\",\n+          \"marketValue\": \"\",\n+          \"kne\": \"\",\n+          \"cashCurrencyUsed\": \"\",\n+          \"assetPriceInCashCurrency\": \"\",\n+          \"initiatedBy\": \"\",\n+          \"fees\": {\n+            \"internalFees\": \"\",\n+            \"externalFees\": \"\",\n+            \"totalFees\": \"\"\n+          },\n+          \"authorizedAssetBreaches\": \"\",\n+          \"amountInAssetCurrency\": \"\",\n+          \"orderType\": \"\",\n+          \"limitPrice\": \"\",\n+          \"triggerPrice\": \"\",\n+          \"validityDate\": \"\"\n+        }\n+      ],\n+      \"depositsAndWithdrawals\": [\n+        {\n+          \"cashCurrency\": \"\",\n+          \"transactionType\": \"\",\n+          \"quantity\": \"\",\n+          \"amount\": \"\",\n+          \"weight\": \"\",\n+          \"marketValue\": \"\",\n+          \"kne\": \"\",\n+          \"fxRate\": \"\",\n+          \"initiatedBy\": \"\"\n+        }\n+      ],\n+      \"currencyConversionOrders\": [\n+        {\n+          \"id\": \"\",\n+          \"lastModifiedAt\": \"\",\n+          \"transactionType\": \"\",\n+          \"quantity\": \"\",\n+          \"weight\": \"\",\n+          \"marketValue\": \"\",\n+          \"kne\": \"\",\n+          \"cashCurrency\": \"\",\n+          \"cashCurrencyUsed\": \"\",\n+          \"fxRate\": \"\",\n+          \"fees\": {\n+            \"internalFees\": \"\",\n+            \"externalFees\": \"\",\n+            \"totalFees\": \"\"\n+          },\n+          \"initiatedBy\": \"\"\n+        }\n+      ],\n+      \"constraints\": {\n+        \"bankBreachedConstraints\": \"\",\n+        \"clientBreachedConstraints\": \"\"\n+      },\n+      \"kne\": \"\",\n+      \"proposalGoals\": [],\n+      \"historicalVolatility\": \"\",\n+      \"historicalReturn\": \"\",\n+      \"ytw\": \"\",\n+      \"duration\": \"\",\n+      \"positions\": [\n+        {\n+          \"sourceId\": \"12345\",\n+          \"asset\": {\n+            \"id\": \"7890\",\n+            \"isin\": \"US1234567890\",\n+            \"valoren\": \"VAL123\",\n+            \"name\": \"Sample Asset\",\n+            \"rationale\": \"Investment opportunity\",\n+            \"multipleLinesName\": \"Sample Asset\\nLine 2\",\n+            \"currency\": \"USD\",\n+            \"mainTradingCurrency\": \"USD\",\n+            \"transactionTaxonName\": \"Equity\",\n+            \"transactionTaxonId\": \"TAXON123\",\n+            \"assetTypeTaxonName\": \"Stock\",\n+            \"assetTypeTaxonId\": \"ASSET123\",\n+            \"universeBelongingStatus\": \"Public\"\n+          },\n+          \"assetPriceInPositionCurrency\": {\n+            \"value\": 100,\n+            \"currency\": \"USD\",\n+            \"type\": \"Market Price\"\n+          },\n+          \"purchaseCost\": 95,\n+          \"purchaseCurrency\": \"USD\",\n+          \"performanceAmount\": 10,\n+          \"performanceCurrency\": \"USD\",\n+          \"performancePercentage\": 10,\n+          \"quantity\": 100,\n+          \"weight\": 10,\n+          \"marketValue\": 1000,\n+          \"riskContribution\": 5,\n+          \"ytm\": 3.5,\n+          \"ytc\": 4,\n+          \"ytw\": 3.75,\n+          \"duration\": 4.25,\n+          \"status\": \"updated\",\n+          \"groups\": [\n+            {\n+              \"taxonomyId\": \"TAXONOMY123\",\n+              \"reportSection\": \"Section A\",\n+              \"key\": \"Group A\",\n+              \"label\": \"Group Label\",\n+              \"rank\": 1,\n+              \"level\": \"Level 1\"\n+            }\n+          ],\n+          \"recommendations\": [\n+            {\n+              \"level\": \"High\",\n+              \"provider\": \"Analyst A\",\n+              \"type\": \"Buy\",\n+              \"rationale\": \"Strong growth potential\"\n+            }\n+          ],\n+          \"assetMetrics\": [\n+            {\n+              \"key\": \"Metric A\",\n+              \"name\": \"Metric Name A\",\n+              \"value\": 8.75\n+            },\n+            {\n+              \"key\": \"Metric B\",\n+              \"name\": \"Metric Name B\",\n+              \"value\": 12.5\n+            }\n+          ]\n+        },\n+        {\n+          \"sourceId\": \"54321\",\n+          \"asset\": {\n+            \"id\": \"9876\",\n+            \"isin\": \"US9876543210\",\n+            \"valoren\": \"VAL987\",\n+            \"name\": \"New Asset\",\n+            \"rationale\": \"Promising investment\",\n+            \"multipleLinesName\": \"New Asset\\nDescription\",\n+            \"currency\": \"EUR\",\n+            \"mainTradingCurrency\": \"EUR\",\n+            \"transactionTaxonName\": \"Fixed Income\",\n+            \"transactionTaxonId\": \"TAXON987\",\n+            \"assetTypeTaxonName\": \"Bond\",\n+            \"assetTypeTaxonId\": \"ASSET987\",\n+            \"universeBelongingStatus\": \"Private\"\n+          },\n+          \"assetPriceInPositionCurrency\": {\n+            \"value\": 120,\n+            \"currency\": \"EUR\",\n+            \"type\": \"Spot Price\"\n+          },\n+          \"purchaseCost\": 110,\n+          \"purchaseCurrency\": \"EUR\",\n+          \"performanceAmount\": 8.5,\n+          \"performanceCurrency\": \"EUR\",\n+          \"performancePercentage\": 8.5,\n+          \"quantity\": 70125,\n+          \"weight\": 7.5,\n+          \"marketValue\": 900,\n+          \"riskContribution\": 4.5,\n+          \"ytm\": 2.75,\n+          \"ytc\": 3.25,\n+          \"ytw\": 3,\n+          \"duration\": 5,\n+          \"status\": \"sold\",\n+          \"groups\": [\n+            {\n+              \"taxonomyId\": \"TAXONOMY987\",\n+              \"reportSection\": \"Section B\",\n+              \"key\": \"Group B\",\n+              \"label\": \"New Group\",\n+              \"rank\": 2,\n+              \"level\": \"Level 2\"\n+            }\n+          ],\n+          \"recommendations\": [\n+            {\n+              \"level\": \"Moderate\",\n+              \"provider\": \"Analyst B\",\n+              \"type\": \"Hold\",\n+              \"rationale\": \"Stable performance\"\n+            }\n+          ],\n+          \"assetMetrics\": [\n+            {\n+              \"key\": \"Metric C\",\n+              \"name\": \"Metric Name C\",\n+              \"value\": 9.25\n+            },\n+            {\n+              \"key\": \"Metric D\",\n+              \"name\": \"Metric Name D\",\n+              \"value\": 14\n+            }\n+          ]\n+        }\n+      ],\n+      \"sellRecommendations\": 0,\n+      \"totalFees\": {\n+        \"internalFees\": {\n+          \"currency\": \"CHF\",\n+          \"value\": 11846.25\n+        },\n+        \"externalFees\": {\n+          \"currency\": \"CHF\",\n+          \"value\": 0.15\n+        }\n+      },\n+      \"fxRates\": [\n+        {\n+          \"fromCurrency\": \"\",\n+          \"toCurrency\": \"\",\n+          \"rate\": \"\"\n+        }\n+      ]\n+    },\n+    \"allocations\": [\n+      {\n+        \"rank\": \"\",\n+        \"taxonomyId\": 93,\n+        \"taxonomyName\": \"\",\n+        \"taxon\": [\n+          {\n+            \"rank\": \"\",\n+            \"taxonId\": \"\",\n+            \"taxonName\": \"\",\n+            \"before\": \"\",\n+            \"after\": \"\",\n+            \"target\": \"\",\n+            \"lowerBound\": \"\",\n+            \"upperBound\": \"\"\n+          }\n+        ]\n+      }\n+    ],\n+    \"riskContributions\": [\n+      {\n+        \"rank\": \"\",\n+        \"taxonomyId\": \"\",\n+        \"taxonomyName\": \"\",\n+        \"taxons\": [\n+          {\n+            \"rank\": \"\",\n+            \"taxonId\": \"\",\n+            \"taxonName\": \"\",\n+            \"before\": \"\",\n+            \"after\": \"\"\n+          }\n+        ]\n+      }\n+    ],\n+    \"stressTests\": [\n+      {\n+        \"id\": \"\",\n+        \"name\": \"\",\n+        \"description\": \"\",\n+        \"startDate\": \"\",\n+        \"endDate\": \"\",\n+        \"before\": \"\",\n+        \"after\": \"\"\n+      }\n+    ],\n+    \"kpis\": [\n+      {\n+        \"id\": \"\",\n+        \"before\": \"\",\n+        \"after\": \"\"\n+      }\n+    ],\n+    \"riskMetrics\": [\n+      {\n+        \"name\": \"\",\n+        \"before\": \"\",\n+        \"after\": \"\"\n+      }\n+    ],\n+    \"constraintGroups\": [\n+      {\n+        \"id\": \"\",\n+        \"name\": \"\",\n+        \"justification\": {\n+          \"text\": \"\",\n+          \"scope\": \"\",\n+          \"expiry\": \"\"\n+        },\n+        \"constraints\": [\n+          {\n+            \"id\": \"\",\n+            \"type\": \"\",\n+            \"name\": \"\",\n+            \"modelValue\": \"\",\n+            \"observedValueAfter\": \"\",\n+            \"observedValueBefore\": \"\",\n+            \"observedValueType\": \"\",\n+            \"lowerBound\": \"\",\n+            \"upperBound\": \"\",\n+            \"hasKnowledge\": \"\",\n+            \"hasExperience\": \"\",\n+            \"validationMode\": \"\",\n+            \"scope\": \"\",\n+            \"respectedAfter\": \"\",\n+            \"respectedBefore\": \"\",\n+            \"assets\": [\n+              {\n+                \"id\": \"\",\n+                \"isin\": \"\",\n+                \"name\": \"\"\n+              }\n+            ],\n+            \"categoryIds\": [],\n+            \"groupingStrategy\": \"\",\n+            \"justification\": \"\"\n+          }\n+        ]\n+      }\n+    ]\n+  }\n"}}
{"type":"log","timestamp":1699013581714,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"wgukafd8uufybs5","id":"wgukafd8uufybs5"},"id":"ujie5sf4njplgb1","previousOperationId":"16wznu9b4czklqg"}
{"type":"operationStart","subtype":"render","name":"proposed-portfolio","previousOperationId":"16wznu9b4czklqg","timestamp":1699013581727,"id":"wubn2bc9kkuh5z9","previousEventId":"b2l41agzpiro8q7","operationId":"oakwoqhd3szqz98","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n@@ -1,1 +1,1 @@\n-{\"reportName\":\"main\",\"headers\":{}}\n\\ No newline at end of file\n+{}\n\\ No newline at end of file\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n@@ -3,26 +3,1 @@\n-    \"name\": \"main\",\n-    \"engine\": \"handlebars\",\n-    \"recipe\": \"html\",\n-    \"shortid\": \"Hw2LCSRlu\",\n-    \"chrome\": {\n-      \"printBackground\": true,\n-      \"landscape\": false,\n-      \"width\": \"29.7cm\",\n-      \"height\": \"21cm\",\n-      \"waitForNetworkIdle\": true\n-    },\n-    \"creationDate\": \"2023-11-01T14:22:22.876Z\",\n-    \"modificationDate\": \"2023-11-03T10:57:15.113Z\",\n-    \"_id\": \"syp8GSiC1l3O8XRf\",\n-    \"content\": \"<!DOCTYPE html>\\r\\n<html lang=\\\"en\\\">\\r\\n<head>\\r\\n    <meta charset=\\\"UTF-8\\\">\\r\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\r\\n    <title>Invesment proposal</title>\\r\\n    <!-- Include Tailwind CSS from CDN -->\\r\\n    <link href=\\\"https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css\\\" rel=\\\"stylesheet\\\">\\r\\n    <!-- Include Font Awesome from CDN -->\\r\\n    <link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css\\\">\\r\\n    {{!-- Add Google fonts --}}\\r\\n        <link rel=\\\"preconnect\\\" href=\\\"https://fonts.googleapis.com\\\">\\r\\n        <link rel=\\\"preconnect\\\" href=\\\"https://fonts.gstatic.com\\\" crossorigin>\\r\\n        <link href=\\\"https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400&family=Ubuntu:ital,wght@0,300;0,500;0,700;1,300;1,500;1,700&display=swap\\\" rel=\\\"stylesheet\\\">\\r\\n    <!-- Your custom CSS can go here -->\\r\\n    <style>\\r\\n        {{asset \\\"./styles/main.css\\\"}}\\r\\n    </style>\\r\\n</head>\\r\\n<body>\\r\\n    {{!-- <div class=\\\"container mx-auto p-4\\\">\\r\\n        <h1 class=\\\"text-2xl font-bold text-gray-800 mb-4\\\">Font Awesome & Tailwind CSS Example</h1>\\r\\n        \\r\\n        <div class=\\\"flex items-center space-x-4\\\">\\r\\n            <i class=\\\"fas fa-camera text-2xl text-blue-500\\\"></i>\\r\\n            <p>This is a camera icon from Font Awesome.</p>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"flex items-center space-x-4 mt-4\\\">\\r\\n            <i class=\\\"fas fa-bell text-2xl text-red-500\\\"></i>\\r\\n            <p>This is a bell icon from Font Awesome.</p>\\r\\n        </div>\\r\\n    </div> --}}\\r\\n    {{childTemplate \\\"./templates/proposed-portfolio\\\"}}\\r\\n</body>\\r\\n</html>\\r\\n\",\n-    \"pdfOperations\": [\n-      {\n-        \"type\": \"prepend\",\n-        \"templateShortid\": \"ftMySgGJh\",\n-        \"enabled\": true\n-      }\n-    ],\n-    \"data\": {\n-      \"shortid\": \"xOo8CoQnV\"\n-    },\n-    \"scripts\": []\n+    \"name\": \"./templates/proposed-portfolio\"\n@@ -547,1 +522,4 @@\n-    ]\n+    ],\n+    \"__appDirectory\": \"D:\\\\Projects\\\\investment-proposal_jsreport\\\\investment-proposal\",\n+    \"__rootDirectory\": \"D:\\\\Projects\\\\investment-proposal_jsreport\\\\investment-proposal\\\\\",\n+    \"__parentModuleDirectory\": \"D:\\\\Projects\\\\investment-proposal_jsreport\\\\investment-proposal\\\\node_modules\\\\@jsreport\\\\jsreport-cli\\\\lib\"\n"}}
{"type":"log","timestamp":1699013581728,"level":"info","message":"Starting rendering (child) request","meta":{"rootId":"wgukafd8uufybs5","id":"bkhgatczisk3hui"},"id":"oce0n6fvmfpd8w7","previousOperationId":"oakwoqhd3szqz98"}
{"type":"log","timestamp":1699013581728,"level":"info","message":"Rendering template { name: proposed-portfolio, recipe: html, engine: handlebars, preview: true }","meta":{"rootId":"wgukafd8uufybs5","id":"bkhgatczisk3hui"},"id":"3f4uhun6tc3os1s","previousOperationId":"oakwoqhd3szqz98"}
{"type":"log","timestamp":1699013581728,"level":"debug","message":"Inline data specified.","meta":{"rootId":"wgukafd8uufybs5","id":"bkhgatczisk3hui"},"id":"u3ne04au1uctljr","previousOperationId":"oakwoqhd3szqz98"}
{"type":"log","timestamp":1699013581729,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"wgukafd8uufybs5","id":"bkhgatczisk3hui"},"id":"bx3f0br6q346zc8","previousOperationId":"oakwoqhd3szqz98"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1699013581730,"id":"akb2naq4in86rs0","previousEventId":"wubn2bc9kkuh5z9","operationId":"yirm54u9yqib2cm","previousOperationId":"oakwoqhd3szqz98","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n@@ -1,1 +1,1 @@\n-{}\n\\ No newline at end of file\n+{\"reportName\":\"proposed-portfolio\",\"headers\":{}}\n\\ No newline at end of file\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n@@ -3,1 +3,17 @@\n-    \"name\": \"./templates/proposed-portfolio\"\n+    \"folder\": {\n+      \"shortid\": \"ZXsqCFL\"\n+    },\n+    \"name\": \"proposed-portfolio\",\n+    \"engine\": \"handlebars\",\n+    \"recipe\": \"html\",\n+    \"data\": null,\n+    \"shortid\": \"WnivzR9ur\",\n+    \"chrome\": {\n+      \"printBackground\": true\n+    },\n+    \"creationDate\": \"2023-11-02T17:27:54.492Z\",\n+    \"modificationDate\": \"2023-11-03T12:12:51.748Z\",\n+    \"_id\": \"4j4EqiEMIe2KTNLJ\",\n+    \"content\": \"    <table border=\\\"1\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>Asset</th>\\r\\n                <th>ISIN</th>\\r\\n                <th>Currency</th>\\r\\n                <th>Status</th>\\r\\n                <th>Quantity</th>\\r\\n                <th>Price</th>\\r\\n                <th>Market Value</th>\\r\\n                <th>Weight</th>\\r\\n                <th>Outside of Universe</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {{#each proposal.positions}}\\r\\n            <!-- Add your data rows here -->\\r\\n            <tr>\\r\\n                <td>{{asset.name}}</td>\\r\\n                <td>{{asset.isin}}</td>\\r\\n                <td>{{asset.currency}}</td>\\r\\n                <td><div class='{{getStatusClass status}}'>{{toUpperCase status}}</div></td>\\r\\n                <td class=\\\"text-right\\\">{{formatNumber quantity decimalPlaces=3}}</td>\\r\\n                <td class=\\\"text-right\\\">{{assetPriceInPositionCurrency.value}}</td>\\r\\n                <td class=\\\"text-right\\\">{{marketValue}}</td>\\r\\n                <td class=\\\"text-right\\\">10.00%</td>\\r\\n                <td>No</td>\\r\\n            </tr>\\r\\n            {{/each}}\\r\\n        </tbody>\\r\\n    </table>\",\n+    \"helpers\": \"const jsreport = require('jsreport-proxy')\\r\\nawait jsreport.assets.registerHelpers('mainHelper.js')\\r\\n\\r\\nfunction getStatusClass(status) {\\r\\n    let className = 'statustag';\\r\\n    switch (status) {\\r\\n        case 'sold':\\r\\n            return `${className} error`\\r\\n        case 'updated':\\r\\n            return `${className} warning`\\r\\n        case 'new':\\r\\n            return `${className} success`\\r\\n    }\\r\\n}\",\n+    \"scripts\": []\n"}}
{"type":"log","timestamp":1699013581730,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"wgukafd8uufybs5","id":"bkhgatczisk3hui"},"id":"94q9vd3trpd9dl8","previousOperationId":"yirm54u9yqib2cm"}
{"type":"log","timestamp":1699013581765,"level":"warn","message":"Error when processing (child) render request\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n\n(mainHelper.js line 33:10)\n\n  31 |\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n> 33 |   number.toFixed(decimalPlaces).toLocaleString();\n     |          ^\n  34 |   \n  35 |   return number;\n  36 | };\n\n\nTypeError: Cannot read properties of undefined (reading 'toFixed')\n    at Object.formatNumber (mainHelper.js:33:10)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:366:23)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:37:49)\nwrapped by:\nError: \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:368:15)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\nwrapped by:\nError: Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async proxy.render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\defaultProxyExtend.js:6:17)\n    at async Object.childTemplate (system-helpers.js:62:15)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)","meta":{"rootId":"wgukafd8uufybs5","id":"bkhgatczisk3hui"},"id":"gkpgaubhxlz39j3","previousOperationId":"yirm54u9yqib2cm"}
{"type":"log","timestamp":1699013581765,"level":"warn","message":"Rendering (child) request finished with error in 67 ms","meta":{"rootId":"wgukafd8uufybs5","id":"bkhgatczisk3hui"},"id":"urezrsr2govmrb4","previousOperationId":"yirm54u9yqib2cm"}
{"type":"log","timestamp":1699013581767,"level":"warn","message":"Error when processing render request 278\n(because) error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n\n(mainHelper.js line 33:10)\n\n  31 |\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n> 33 |   number.toFixed(decimalPlaces).toLocaleString();\n     |          ^\n  34 |   \n  35 |   return number;\n  36 | };\n\n\n\n(system-helpers.js line 62:15)\n\n  60 |   const jsreport = require('jsreport-proxy')\n  61 |\n> 62 |   const res = await jsreport.render({\n     |               ^\n  63 |     template: typeof templateNameOrObject === 'string'\n  64 |       ? {\n  65 |           name: templateNameOrObject\n\n\nTypeError: Cannot read properties of undefined (reading 'toFixed')\n    at Object.formatNumber (mainHelper.js:33:10)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:366:23)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:37:49)\nwrapped by:\nError: \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:368:15)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\nwrapped by:\nError: Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async proxy.render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\defaultProxyExtend.js:6:17)\n    at async Object.childTemplate (system-helpers.js:62:15)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\nwrapped by:\nError: \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n\n(mainHelper.js line 33:10)\n\n  31 |\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n> 33 |   number.toFixed(decimalPlaces).toLocaleString();\n     |          ^\n  34 |   \n  35 |   return number;\n  36 | };\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:376:15\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\n    at async executionFn (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:225:9)\n    at async run (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:285:14)\nwrapped by:\nError: Error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n\n(mainHelper.js line 33:10)\n\n  31 |\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n> 33 |   number.toFixed(decimalPlaces).toLocaleString();\n     |          ^\n  34 |   \n  35 |   return number;\n  36 | };\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","meta":{"rootId":"wgukafd8uufybs5","id":"wgukafd8uufybs5"},"id":"o7gc53s9ffacaao","previousOperationId":"16wznu9b4czklqg"}
{"type":"log","timestamp":1699013581767,"level":"warn","message":"Rendering request 278 finished with error in 69 ms","meta":{"rootId":"wgukafd8uufybs5","id":"wgukafd8uufybs5"},"id":"a0hxuh83a96bouv","previousOperationId":"16wznu9b4czklqg"}
{"type":"error","timestamp":1699013581800,"entity":{"shortid":"stSrr3v","name":"mainHelper.js","content":"const vm = require('vm')\r\n\r\nconst interpolate = (tmpl, vars) => {\r\n  return vm.runInNewContext('`' + tmpl + '`' , vars)\r\n}\r\n\r\nasync function localizeExt(key, folder, opts) {\r\n  const v = await localize(key, folder);\r\n  return interpolate(v, opts.hash)\r\n}\r\n\r\nfunction ifEquals(arg1, arg2, options) {\r\n    return (arg1 == arg2) ? options.fn(this) : options.inverse(this);\r\n}\r\n\r\nfunction ifvalue(conditional, options) {\r\n    if (options.hash.value === conditional) {\r\n        return options.fn(this)\r\n    } else {\r\n        return options.inverse(this);\r\n    }\r\n}\r\n\r\nfunction toUpperCase(text) {\r\n  return text.toUpperCase()\r\n}\r\n\r\nfunction toLocaleString(text) {\r\n  return text.toLocaleString();\r\n}\r\n\r\nfunction formatNumber({number, decimalPlaces = 2}) {\r\n  number.toFixed(decimalPlaces).toLocaleString();\r\n  \r\n  return number;\r\n}"},"lineNumber":33,"property":"content","statusCode":400,"weak":true,"logged":true,"previousOperationId":"16wznu9b4czklqg","id":"6p8l3ddqwc84ven","stack":"TypeError: Cannot read properties of undefined (reading 'toFixed')\n    at Object.formatNumber (mainHelper.js:33:10)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:366:23)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:37:49)\nwrapped by:\nError: \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:368:15)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\nwrapped by:\nError: Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async proxy.render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\defaultProxyExtend.js:6:17)\n    at async Object.childTemplate (system-helpers.js:62:15)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\nwrapped by:\nError: \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n\n(mainHelper.js line 33:10)\n\n  31 |\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n> 33 |   number.toFixed(decimalPlaces).toLocaleString();\n     |          ^\n  34 |   \n  35 |   return number;\n  36 | };\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:376:15\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\n    at async executionFn (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:225:9)\n    at async run (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:285:14)\nwrapped by:\nError: Error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n\n(mainHelper.js line 33:10)\n\n  31 |\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n> 33 |   number.toFixed(decimalPlaces).toLocaleString();\n     |          ^\n  34 |   \n  35 |   return number;\n  36 | };\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","message":"Error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) cannot read properties of undefined (reading 'toFixed')\n\n(mainHelper.js line 33:10)\n\n  31 |\n  32 | function formatNumber({number, decimalPlaces = 2}) {\n> 33 |   number.toFixed(decimalPlaces).toLocaleString();\n     |          ^\n  34 |   \n  35 |   return number;\n  36 | };\n\n\n\n(system-helpers.js line 62:15)\n\n  60 |   const jsreport = require('jsreport-proxy')\n  61 |\n> 62 |   const res = await jsreport.render({\n     |               ^\n  63 |     template: typeof templateNameOrObject === 'string'\n  64 |       ? {\n  65 |           name: templateNameOrObject\n\n"}
