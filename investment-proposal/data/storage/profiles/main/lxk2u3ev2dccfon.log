{"type":"operationStart","subtype":"profile","data":{"_id":"hk9s1gKKUuzWK5fx","timestamp":"2023-11-03T11:06:01.136Z","state":"queued","mode":"standard","creationDate":"2023-11-03T11:06:01.138Z","modificationDate":"2023-11-03T11:06:01.138Z","shortid":"PRI3jzd","$entitySet":"profiles"},"doDiffs":false,"timestamp":1699009561137,"id":"75nsnp07cu4rwrp","previousOperationId":null,"operationId":"80nzx0i9b8a1yeg"}
{"type":"log","level":"info","message":"Render request 242 queued for execution and waiting for available worker","previousOperationId":"80nzx0i9b8a1yeg","timestamp":1699009561137,"id":"8syd9l2kjpwa091"}
{"type":"operationStart","subtype":"render","name":"main","previousOperationId":"80nzx0i9b8a1yeg","timestamp":1699009561148,"id":"qb2vpe36usf8m61","previousEventId":"75nsnp07cu4rwrp","operationId":"gxxm6jkon3l4nve"}
{"type":"log","timestamp":1699009561148,"level":"info","message":"Starting rendering request 242","meta":{"rootId":"lxk2u3ev2dccfon","id":"lxk2u3ev2dccfon"},"id":"ciha8ns1hxofet1","previousOperationId":"gxxm6jkon3l4nve"}
{"type":"log","timestamp":1699009561148,"level":"info","message":"Rendering template { name: main, recipe: html, engine: handlebars, preview: true }","meta":{"rootId":"lxk2u3ev2dccfon","id":"lxk2u3ev2dccfon"},"id":"4mll9zcjm5lv2fq","previousOperationId":"gxxm6jkon3l4nve"}
{"type":"log","timestamp":1699009561148,"level":"debug","message":"Adding sample data xOo8CoQnV","meta":{"rootId":"lxk2u3ev2dccfon","id":"lxk2u3ev2dccfon"},"id":"gccfhfqmu69yt5r","previousOperationId":"gxxm6jkon3l4nve"}
{"type":"log","timestamp":1699009561150,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"lxk2u3ev2dccfon","id":"lxk2u3ev2dccfon"},"id":"93n9igjo1ju2nl9","previousOperationId":"gxxm6jkon3l4nve"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1699009561150,"id":"o2sgvk6c1ydpbnb","previousEventId":"qb2vpe36usf8m61","operationId":"qgrvqnvsriaqly2","previousOperationId":"gxxm6jkon3l4nve"}
{"type":"log","timestamp":1699009561150,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"lxk2u3ev2dccfon","id":"lxk2u3ev2dccfon"},"id":"5pn376zxwilawvm","previousOperationId":"qgrvqnvsriaqly2"}
{"type":"operationStart","subtype":"render","name":"proposed-portfolio","previousOperationId":"qgrvqnvsriaqly2","timestamp":1699009561163,"id":"2tk1lfeisytsdm3","previousEventId":"o2sgvk6c1ydpbnb","operationId":"uydxrpa4cha0i1m"}
{"type":"log","timestamp":1699009561163,"level":"info","message":"Starting rendering (child) request","meta":{"rootId":"lxk2u3ev2dccfon","id":"i22lk3e6bodr14a"},"id":"x7mskkxmlgfnh3u","previousOperationId":"uydxrpa4cha0i1m"}
{"type":"log","timestamp":1699009561163,"level":"info","message":"Rendering template { name: proposed-portfolio, recipe: html, engine: handlebars, preview: true }","meta":{"rootId":"lxk2u3ev2dccfon","id":"i22lk3e6bodr14a"},"id":"vhv76nhpoylg26j","previousOperationId":"uydxrpa4cha0i1m"}
{"type":"log","timestamp":1699009561164,"level":"debug","message":"Inline data specified.","meta":{"rootId":"lxk2u3ev2dccfon","id":"i22lk3e6bodr14a"},"id":"v254qbdyrq99hik","previousOperationId":"uydxrpa4cha0i1m"}
{"type":"log","timestamp":1699009561168,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"lxk2u3ev2dccfon","id":"i22lk3e6bodr14a"},"id":"5gkbo51a2u5gweu","previousOperationId":"uydxrpa4cha0i1m"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1699009561168,"id":"mi1qd3zd4miz6mz","previousEventId":"2tk1lfeisytsdm3","operationId":"d8u6gftqo74qp0i","previousOperationId":"uydxrpa4cha0i1m"}
{"type":"log","timestamp":1699009561168,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"lxk2u3ev2dccfon","id":"i22lk3e6bodr14a"},"id":"kasx21wr0sg2r9t","previousOperationId":"d8u6gftqo74qp0i"}
{"type":"log","timestamp":1699009561196,"level":"warn","message":"Error when processing (child) render request\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n\n(mainHelper.js line 33:19)\n\n  31 |\n  32 | function formatNumber(number, decimalPlaces = 2) {\n> 33 |   number = number.toFixed(decimalPlaces);\n     |                   ^\n  34 |   return number.toLocaleString();\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n\n\nTypeError: number.toFixed is not a function\n    at Object.formatNumber (mainHelper.js:33:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:366:23)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:37:49)\nwrapped by:\nError: \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:368:15)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\nwrapped by:\nError: Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async proxy.render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\defaultProxyExtend.js:6:17)\n    at async Object.childTemplate (system-helpers.js:62:15)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)","meta":{"rootId":"lxk2u3ev2dccfon","id":"i22lk3e6bodr14a"},"id":"qp1cpkdkcsuhkaf","previousOperationId":"d8u6gftqo74qp0i"}
{"type":"log","timestamp":1699009561196,"level":"warn","message":"Rendering (child) request finished with error in 60 ms","meta":{"rootId":"lxk2u3ev2dccfon","id":"i22lk3e6bodr14a"},"id":"02ebdntyqze4c6y","previousOperationId":"d8u6gftqo74qp0i"}
{"type":"log","timestamp":1699009561201,"level":"warn","message":"Error when processing render request 242\n(because) error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n\n(mainHelper.js line 33:19)\n\n  31 |\n  32 | function formatNumber(number, decimalPlaces = 2) {\n> 33 |   number = number.toFixed(decimalPlaces);\n     |                   ^\n  34 |   return number.toLocaleString();\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n\n\n\n(system-helpers.js line 62:15)\n\n  60 |   const jsreport = require('jsreport-proxy')\n  61 |\n> 62 |   const res = await jsreport.render({\n     |               ^\n  63 |     template: typeof templateNameOrObject === 'string'\n  64 |       ? {\n  65 |           name: templateNameOrObject\n\n\nTypeError: number.toFixed is not a function\n    at Object.formatNumber (mainHelper.js:33:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:366:23)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:37:49)\nwrapped by:\nError: \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:368:15)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\nwrapped by:\nError: Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async proxy.render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\defaultProxyExtend.js:6:17)\n    at async Object.childTemplate (system-helpers.js:62:15)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\nwrapped by:\nError: \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n\n(mainHelper.js line 33:19)\n\n  31 |\n  32 | function formatNumber(number, decimalPlaces = 2) {\n> 33 |   number = number.toFixed(decimalPlaces);\n     |                   ^\n  34 |   return number.toLocaleString();\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:376:15\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\n    at async executionFn (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:225:9)\n    at async run (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:285:14)\nwrapped by:\nError: Error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n\n(mainHelper.js line 33:19)\n\n  31 |\n  32 | function formatNumber(number, decimalPlaces = 2) {\n> 33 |   number = number.toFixed(decimalPlaces);\n     |                   ^\n  34 |   return number.toLocaleString();\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","meta":{"rootId":"lxk2u3ev2dccfon","id":"lxk2u3ev2dccfon"},"id":"q51v6yws1xae3ej","previousOperationId":"qgrvqnvsriaqly2"}
{"type":"log","timestamp":1699009561201,"level":"warn","message":"Rendering request 242 finished with error in 65 ms","meta":{"rootId":"lxk2u3ev2dccfon","id":"lxk2u3ev2dccfon"},"id":"ocslshwotf3tmbe","previousOperationId":"qgrvqnvsriaqly2"}
{"type":"error","timestamp":1699009561226,"entity":{"shortid":"stSrr3v","name":"mainHelper.js","content":"const vm = require('vm')\r\n\r\nconst interpolate = (tmpl, vars) => {\r\n  return vm.runInNewContext('`' + tmpl + '`' , vars)\r\n}\r\n\r\nasync function localizeExt(key, folder, opts) {\r\n  const v = await localize(key, folder);\r\n  return interpolate(v, opts.hash)\r\n}\r\n\r\nfunction ifEquals(arg1, arg2, options) {\r\n    return (arg1 == arg2) ? options.fn(this) : options.inverse(this);\r\n}\r\n\r\nfunction ifvalue(conditional, options) {\r\n    if (options.hash.value === conditional) {\r\n        return options.fn(this)\r\n    } else {\r\n        return options.inverse(this);\r\n    }\r\n}\r\n\r\nfunction toUpperCase(text) {\r\n  return text.toUpperCase()\r\n}\r\n\r\nfunction toLocaleString(text) {\r\n  return text.toLocaleString();\r\n}\r\n\r\nfunction formatNumber(number, decimalPlaces = 2) {\r\n  number = number.toFixed(decimalPlaces);\r\n  return number.toLocaleString();\r\n}"},"lineNumber":33,"property":"content","statusCode":400,"weak":true,"logged":true,"previousOperationId":"qgrvqnvsriaqly2","id":"1ayxn7v6p879not","stack":"TypeError: number.toFixed is not a function\n    at Object.formatNumber (mainHelper.js:33:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:366:23)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:37:49)\nwrapped by:\nError: \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:368:15)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:345:27)\n    at Object.wrapper (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at 1 (eval at compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:22:114)\n    at prog (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:268:12)\n    at execIteration (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:51:19)\n    at Object.<anonymous> (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\each.js:61:13)\nwrapped by:\nError: Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async proxy.render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\defaultProxyExtend.js:6:17)\n    at async Object.childTemplate (system-helpers.js:62:15)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\nwrapped by:\nError: \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n\n(mainHelper.js line 33:19)\n\n  31 |\n  32 | function formatNumber(number, decimalPlaces = 2) {\n> 33 |   number = number.toFixed(decimalPlaces);\n     |                   ^\n  34 |   return number.toLocaleString();\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:362:54)\n    at D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:376:15\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:226:40\n    at async Promise.all (index 1)\n    at async executionFn (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:225:9)\n    at async run (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:285:14)\nwrapped by:\nError: Error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n\n(mainHelper.js line 33:19)\n\n  31 |\n  32 | function formatNumber(number, decimalPlaces = 2) {\n> 33 |   number = number.toFixed(decimalPlaces);\n     |                   ^\n  34 |   return number.toLocaleString();\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n\n\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","message":"Error when evaluating engine handlebars for template /main\n(because) \"childTemplate\" helper call failed\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) \"formatNumber\" helper call failed\n(because) number.toFixed is not a function\n\n(mainHelper.js line 33:19)\n\n  31 |\n  32 | function formatNumber(number, decimalPlaces = 2) {\n> 33 |   number = number.toFixed(decimalPlaces);\n     |                   ^\n  34 |   return number.toLocaleString();\n  35 | };\n  36 |             __topLevelFunctions = {...__topLevelFunctions, \"localizeExt\": localizeExt,\"ifEquals\": ifEquals,\"ifvalue\": ifvalue,\"toUpperCase\": toUpperCase,\"toLocaleString\": toLocaleString,\"formatNumber\": formatNumber}\n\n\n\n(system-helpers.js line 62:15)\n\n  60 |   const jsreport = require('jsreport-proxy')\n  61 |\n> 62 |   const res = await jsreport.render({\n     |               ^\n  63 |     template: typeof templateNameOrObject === 'string'\n  64 |       ? {\n  65 |           name: templateNameOrObject\n\n"}
