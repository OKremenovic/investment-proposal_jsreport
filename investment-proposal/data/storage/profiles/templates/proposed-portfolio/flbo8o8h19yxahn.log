{"type":"operationStart","subtype":"profile","data":{"_id":"oYLiAUqOJHNWfrpQ","timestamp":"2023-11-03T10:20:16.893Z","state":"queued","mode":"full","creationDate":"2023-11-03T10:20:16.895Z","modificationDate":"2023-11-03T10:20:16.895Z","shortid":"41bSyXJ","$entitySet":"profiles"},"doDiffs":false,"timestamp":1699006816894,"id":"r3llwpumjbi7mz0","previousOperationId":null,"operationId":"7s6ered0zoltpdk"}
{"type":"log","level":"info","message":"Render request 194 queued for execution and waiting for available worker","previousOperationId":"7s6ered0zoltpdk","timestamp":1699006816894,"id":"5ixl7ap5hlvmawx"}
{"type":"operationStart","subtype":"render","name":"proposed-portfolio","previousOperationId":"7s6ered0zoltpdk","timestamp":1699006816902,"id":"ympka34kqmmylz8","previousEventId":"r3llwpumjbi7mz0","operationId":"s13f9wnp1wbf95j","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n@@ -1,0 +1,1 @@\n\\ No newline at end of file\n+{}\n\\ No newline at end of file\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n@@ -1,0 +1,543 @@\n\\ No newline at end of file\n+{\n+  \"template\": {\n+    \"folder\": {\n+      \"shortid\": \"ZXsqCFL\"\n+    },\n+    \"name\": \"proposed-portfolio\",\n+    \"engine\": \"handlebars\",\n+    \"recipe\": \"html\",\n+    \"data\": {\n+      \"shortid\": \"xOo8CoQnV\"\n+    },\n+    \"shortid\": \"WnivzR9ur\",\n+    \"chrome\": {\n+      \"printBackground\": true\n+    },\n+    \"@odata.context\": \"http://localhost:5488/odata/$metadata#templates/$entity\",\n+    \"@odata.editLink\": \"http://localhost:5488/odata/templates('4j4EqiEMIe2KTNLJ')\",\n+    \"@odata.id\": \"http://localhost:5488/odata/templates('4j4EqiEMIe2KTNLJ')\",\n+    \"creationDate\": \"2023-11-02T17:27:54.492Z\",\n+    \"modificationDate\": \"2023-11-03T10:20:15.079Z\",\n+    \"content\": \"{{!-- <!DOCTYPE html>\\r\\n<html lang=\\\"en\\\">\\r\\n<head>\\r\\n    <meta charset=\\\"UTF-8\\\">\\r\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\r\\n    \\r\\n</head> --}}\\r\\n{{!-- <body> --}}\\r\\n    <style>\\r\\n        {{asset \\\"../styles/main.css\\\"}}\\r\\n    </style>\\r\\n    <table border=\\\"1\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>Asset</th>\\r\\n                <th>ISIN</th>\\r\\n                <th>Currency</th>\\r\\n                <th>Status</th>\\r\\n                <th>Quantity</th>\\r\\n                <th>Price</th>\\r\\n                <th>Market Value</th>\\r\\n                <th>Weight</th>\\r\\n                <th>Outside of Universe</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {{#each proposal.positions}}\\r\\n            <!-- Add your data rows here -->\\r\\n            <tr>\\r\\n                <td>{{asset.name}}</td>\\r\\n                <td>{{asset.isin}}</td>\\r\\n                <td>{{asset.currency}}</td>\\r\\n                {{!-- TODO: ask them how to combine classes - one always and other under condition --}}\\r\\n                <td><div class='statustag success'>{{#toUpperCase status}}</div></td>\\r\\n                <td>{{quantity}}</td>\\r\\n                <td>{{assetPriceInPositionCurrency.value}}</td>\\r\\n                <td>{{marketValue}}</td>\\r\\n                <td>10.00%</td>\\r\\n                <td>No</td>\\r\\n            </tr>\\r\\n            {{/each}}\\r\\n            <!-- Add more data rows as needed -->\\r\\n        </tbody>\\r\\n    </table>\\r\\n{{!-- </body> --}}\\r\\n{{!-- </html> --}}\\r\\n\",\n+    \"helpers\": \"const jsreport = require('jsreport-proxy')\\r\\nawait jsreport.assets.registerHelpers('mainHelper.js')\\r\\n\\r\\n// function getStatusClass(status) {\\r\\n//     // if (status == 'updated') return 'statustag success';\\r\\n//     if (['new', 'increased'].includes(status)) return 'statustag success';\\r\\n//     if (['sold', 'decreased'].includes(status)) return 'statustag error';\\r\\n// }\\r\\n\\r\\nHandlebars.registerHelper(\\\"getStatusClass\\\", function(status) {\\r\\n    if (['new', 'increased'].includes(status)) return \\\"statustag success\\\";\\r\\n    if (['sold', 'decreased'].includes(status)) return \\\"statustag error\\\";\\r\\n});\"\n+  },\n+  \"data\": {\n+    \"user\": {\n+      \"organizationId\": \"\",\n+      \"id\": \"\",\n+      \"username\": \"\"\n+    },\n+    \"code\": {\n+      \"type\": \"\",\n+      \"value\": \"\"\n+    },\n+    \"client\": {\n+      \"individualId\": \"\",\n+      \"individualFullName\": \"Asterix Bordenca\",\n+      \"clientRelationshipId\": \"\",\n+      \"riskProfile\": \"\",\n+      \"referenceCurrency\": \"\",\n+      \"Locale language\": \"\",\n+      \"managerName\": \"\",\n+      \"advisorName\": \"\",\n+      \"regulatoryClassification\": \"\",\n+      \"isProspect\": \"\",\n+      \"aggregatedPortfoliosRiskGrades\": {\n+        \"before\": \"\",\n+        \"after\": \"\"\n+      }\n+    },\n+    \"portfolio\": {\n+      \"id\": \"\",\n+      \"name\": 1112,\n+      \"mandate\": \"Silver\",\n+      \"strategyProfileId\": \"\",\n+      \"strategyProfile\": 5,\n+      \"strategyProfileName\": \"CHF - Balanced - Gold\",\n+      \"strategyProfileDescription\": \"\",\n+      \"currency\": \"CHF\",\n+      \"marketValue\": 1539542.72,\n+      \"netFortune\": \"\",\n+      \"riskGrade\": 5,\n+      \"isSuitable\": true,\n+      \"healthCheck\": false,\n+      \"constraints\": {\n+        \"bankBreachedConstraints\": [],\n+        \"clientBreachedConstraints\": []\n+      },\n+      \"historicalVolatility\": \"\",\n+      \"historicalReturn\": \"\",\n+      \"ytw\": \"\",\n+      \"duration\": \"\",\n+      \"sellRecommendations\": 0,\n+      \"overallPerformance\": {\n+        \"percentage\": \"%\",\n+        \"returnType\": \"\",\n+        \"amount\": \"\",\n+        \"currency\": \"\",\n+        \"timeFrame\": 3.6\n+      },\n+      \"advisor\": {\n+        \"userName\": \"\",\n+        \"fullName\": \"Beaumont Sebastien\",\n+        \"phoneNumber\": \"\",\n+        \"email\": \"\",\n+        \"office\": {\n+          \"name\": \"\",\n+          \"street\": \"\",\n+          \"zip\": \"\",\n+          \"city\": \"\",\n+          \"country\": \"\"\n+        }\n+      },\n+      \"positions\": [\n+        {\n+          \"sourceId\": \"\",\n+          \"asset\": \"\",\n+          \"assetPriceInPositionCurrency\": {\n+            \"value\": \"\",\n+            \"currency\": \"\",\n+            \"type\": \"\"\n+          },\n+          \"purchaseCost\": \"\",\n+          \"purchaseCurrency\": \"\",\n+          \"performanceAmount\": \"\",\n+          \"performanceCurrency\": \"\",\n+          \"performancePercentage\": \"\",\n+          \"quantity\": \"\",\n+          \"weight\": \"\",\n+          \"marketValue\": \"\",\n+          \"riskContribution\": \"\",\n+          \"ytm\": \"\",\n+          \"ytc\": \"\",\n+          \"ytw\": \"\",\n+          \"duration\": \"\",\n+          \"status\": \"\",\n+          \"groups\": [\n+            {\n+              \"taxonomyId\": \"\",\n+              \"reportSection\": \"\",\n+              \"key\": \"\",\n+              \"label\": \"\",\n+              \"rank\": \"\",\n+              \"level\": \"\"\n+            }\n+          ],\n+          \"recommendations\": [\n+            {\n+              \"level\": \"\",\n+              \"provider\": \"\",\n+              \"type\": \"\",\n+              \"rationale\": \"\"\n+            }\n+          ],\n+          \"assetMetrics\": [\n+            {\n+              \"key\": \"\",\n+              \"name\": \"\",\n+              \"value\": \"\"\n+            }\n+          ]\n+        }\n+      ],\n+      \"liabilities\": [\n+        {\n+          \"label\": \"\",\n+          \"nominalAmount\": \"\",\n+          \"nominalCurrency\": \"\",\n+          \"marketValue\": \"\",\n+          \"dueDate\": \"\",\n+          \"interestRate\": \"\"\n+        }\n+      ],\n+      \"performances\": [\n+        {\n+          \"percentage\": \"\",\n+          \"returnType\": \"\",\n+          \"amount\": \"\",\n+          \"currency\": \"\",\n+          \"timeFrame\": \"\"\n+        }\n+      ],\n+      \"fxRates\": [\n+        {\n+          \"fromCurrency\": \"\",\n+          \"toCurrency\": \"\",\n+          \"rate\": \"\"\n+        }\n+      ],\n+      \"taxons\": [\n+        {\n+          \"taxonId\": \"\",\n+          \"taxonName\": \"\",\n+          \"order\": \"\",\n+          \"taxonomy\": {\n+            \"taxonomyId\": \"\",\n+            \"taxonomyName\": \"\",\n+            \"order\": \"\"\n+          }\n+        }\n+      ]\n+    },\n+    \"proposal\": {\n+      \"id\": \"\",\n+      \"sharedId\": \"\",\n+      \"status\": \"\",\n+      \"generatedAt\": \"July 14, 2020\",\n+      \"createdBy\": \"\",\n+      \"lastModifiedBy\": \"\",\n+      \"lastModifiedAt\": \"\",\n+      \"clonedFromProposalId\": \"\",\n+      \"name\": \"Report business rule - Proposal name\",\n+      \"mandate\": \"\",\n+      \"strategyProfile\": \"\",\n+      \"strategyProfileName\": \"\",\n+      \"strategyProfileDescription\": \"\",\n+      \"netFortune\": \"\",\n+      \"marketValue\": \"\",\n+      \"marketValueCurrency\": \"\",\n+      \"comment\": \"\",\n+      \"riskGrade\": 3,\n+      \"isSuitable\": true,\n+      \"healthCheck\": false,\n+      \"orders\": [\n+        {\n+          \"id\": \"\",\n+          \"lastModifiedAt\": \"\",\n+          \"asset\": {\n+            \"id\": \"\",\n+            \"isin\": \"\",\n+            \"valoren\": \"\",\n+            \"name\": \"\",\n+            \"rationale\": \"\",\n+            \"multipleLinesName\": \"\",\n+            \"currency\": \"\",\n+            \"mainTradingCurrency\": \"\",\n+            \"transactionTaxonName\": \"\",\n+            \"transactionTaxonId\": \"\",\n+            \"assetTypeTaxonName\": \"\",\n+            \"assetTypeTaxonId\": \"\",\n+            \"universeBelongingStatus\": \"\"\n+          },\n+          \"transactionType\": \"buy\",\n+          \"quantity\": \"\",\n+          \"amount\": 786447,\n+          \"weight\": \"\",\n+          \"marketValue\": \"\",\n+          \"kne\": \"\",\n+          \"cashCurrencyUsed\": \"\",\n+          \"assetPriceInCashCurrency\": \"\",\n+          \"initiatedBy\": \"\",\n+          \"fees\": {\n+            \"internalFees\": \"\",\n+            \"externalFees\": \"\",\n+            \"totalFees\": \"\"\n+          },\n+          \"authorizedAssetBreaches\": \"\",\n+          \"amountInAssetCurrency\": \"\",\n+          \"orderType\": \"\",\n+          \"limitPrice\": \"\",\n+          \"triggerPrice\": \"\",\n+          \"validityDate\": \"\"\n+        }\n+      ],\n+      \"depositsAndWithdrawals\": [\n+        {\n+          \"cashCurrency\": \"\",\n+          \"transactionType\": \"\",\n+          \"quantity\": \"\",\n+          \"amount\": \"\",\n+          \"weight\": \"\",\n+          \"marketValue\": \"\",\n+          \"kne\": \"\",\n+          \"fxRate\": \"\",\n+          \"initiatedBy\": \"\"\n+        }\n+      ],\n+      \"currencyConversionOrders\": [\n+        {\n+          \"id\": \"\",\n+          \"lastModifiedAt\": \"\",\n+          \"transactionType\": \"\",\n+          \"quantity\": \"\",\n+          \"weight\": \"\",\n+          \"marketValue\": \"\",\n+          \"kne\": \"\",\n+          \"cashCurrency\": \"\",\n+          \"cashCurrencyUsed\": \"\",\n+          \"fxRate\": \"\",\n+          \"fees\": {\n+            \"internalFees\": \"\",\n+            \"externalFees\": \"\",\n+            \"totalFees\": \"\"\n+          },\n+          \"initiatedBy\": \"\"\n+        }\n+      ],\n+      \"constraints\": {\n+        \"bankBreachedConstraints\": \"\",\n+        \"clientBreachedConstraints\": \"\"\n+      },\n+      \"kne\": \"\",\n+      \"proposalGoals\": [],\n+      \"historicalVolatility\": \"\",\n+      \"historicalReturn\": \"\",\n+      \"ytw\": \"\",\n+      \"duration\": \"\",\n+      \"positions\": [\n+        {\n+          \"sourceId\": \"12345\",\n+          \"asset\": {\n+            \"id\": \"7890\",\n+            \"isin\": \"US1234567890\",\n+            \"valoren\": \"VAL123\",\n+            \"name\": \"Sample Asset\",\n+            \"rationale\": \"Investment opportunity\",\n+            \"multipleLinesName\": \"Sample Asset\\nLine 2\",\n+            \"currency\": \"USD\",\n+            \"mainTradingCurrency\": \"USD\",\n+            \"transactionTaxonName\": \"Equity\",\n+            \"transactionTaxonId\": \"TAXON123\",\n+            \"assetTypeTaxonName\": \"Stock\",\n+            \"assetTypeTaxonId\": \"ASSET123\",\n+            \"universeBelongingStatus\": \"Public\"\n+          },\n+          \"assetPriceInPositionCurrency\": {\n+            \"value\": 100,\n+            \"currency\": \"USD\",\n+            \"type\": \"Market Price\"\n+          },\n+          \"purchaseCost\": 95,\n+          \"purchaseCurrency\": \"USD\",\n+          \"performanceAmount\": 10,\n+          \"performanceCurrency\": \"USD\",\n+          \"performancePercentage\": 10,\n+          \"quantity\": 100,\n+          \"weight\": 10,\n+          \"marketValue\": 1000,\n+          \"riskContribution\": 5,\n+          \"ytm\": 3.5,\n+          \"ytc\": 4,\n+          \"ytw\": 3.75,\n+          \"duration\": 4.25,\n+          \"status\": \"increased\",\n+          \"groups\": [\n+            {\n+              \"taxonomyId\": \"TAXONOMY123\",\n+              \"reportSection\": \"Section A\",\n+              \"key\": \"Group A\",\n+              \"label\": \"Group Label\",\n+              \"rank\": 1,\n+              \"level\": \"Level 1\"\n+            }\n+          ],\n+          \"recommendations\": [\n+            {\n+              \"level\": \"High\",\n+              \"provider\": \"Analyst A\",\n+              \"type\": \"Buy\",\n+              \"rationale\": \"Strong growth potential\"\n+            }\n+          ],\n+          \"assetMetrics\": [\n+            {\n+              \"key\": \"Metric A\",\n+              \"name\": \"Metric Name A\",\n+              \"value\": 8.75\n+            },\n+            {\n+              \"key\": \"Metric B\",\n+              \"name\": \"Metric Name B\",\n+              \"value\": 12.5\n+            }\n+          ]\n+        },\n+        {\n+          \"sourceId\": \"54321\",\n+          \"asset\": {\n+            \"id\": \"9876\",\n+            \"isin\": \"US9876543210\",\n+            \"valoren\": \"VAL987\",\n+            \"name\": \"New Asset\",\n+            \"rationale\": \"Promising investment\",\n+            \"multipleLinesName\": \"New Asset\\nDescription\",\n+            \"currency\": \"EUR\",\n+            \"mainTradingCurrency\": \"EUR\",\n+            \"transactionTaxonName\": \"Fixed Income\",\n+            \"transactionTaxonId\": \"TAXON987\",\n+            \"assetTypeTaxonName\": \"Bond\",\n+            \"assetTypeTaxonId\": \"ASSET987\",\n+            \"universeBelongingStatus\": \"Private\"\n+          },\n+          \"assetPriceInPositionCurrency\": {\n+            \"value\": 120,\n+            \"currency\": \"EUR\",\n+            \"type\": \"Spot Price\"\n+          },\n+          \"purchaseCost\": 110,\n+          \"purchaseCurrency\": \"EUR\",\n+          \"performanceAmount\": 8.5,\n+          \"performanceCurrency\": \"EUR\",\n+          \"performancePercentage\": 8.5,\n+          \"quantity\": 75,\n+          \"weight\": 7.5,\n+          \"marketValue\": 900,\n+          \"riskContribution\": 4.5,\n+          \"ytm\": 2.75,\n+          \"ytc\": 3.25,\n+          \"ytw\": 3,\n+          \"duration\": 5,\n+          \"status\": \"sold\",\n+          \"groups\": [\n+            {\n+              \"taxonomyId\": \"TAXONOMY987\",\n+              \"reportSection\": \"Section B\",\n+              \"key\": \"Group B\",\n+              \"label\": \"New Group\",\n+              \"rank\": 2,\n+              \"level\": \"Level 2\"\n+            }\n+          ],\n+          \"recommendations\": [\n+            {\n+              \"level\": \"Moderate\",\n+              \"provider\": \"Analyst B\",\n+              \"type\": \"Hold\",\n+              \"rationale\": \"Stable performance\"\n+            }\n+          ],\n+          \"assetMetrics\": [\n+            {\n+              \"key\": \"Metric C\",\n+              \"name\": \"Metric Name C\",\n+              \"value\": 9.25\n+            },\n+            {\n+              \"key\": \"Metric D\",\n+              \"name\": \"Metric Name D\",\n+              \"value\": 14\n+            }\n+          ]\n+        }\n+      ],\n+      \"sellRecommendations\": 0,\n+      \"totalFees\": {\n+        \"internalFees\": {\n+          \"currency\": \"CHF\",\n+          \"value\": 11846.25\n+        },\n+        \"externalFees\": {\n+          \"currency\": \"CHF\",\n+          \"value\": 0.15\n+        }\n+      },\n+      \"fxRates\": [\n+        {\n+          \"fromCurrency\": \"\",\n+          \"toCurrency\": \"\",\n+          \"rate\": \"\"\n+        }\n+      ]\n+    },\n+    \"allocations\": [\n+      {\n+        \"rank\": \"\",\n+        \"taxonomyId\": 93,\n+        \"taxonomyName\": \"\",\n+        \"taxon\": [\n+          {\n+            \"rank\": \"\",\n+            \"taxonId\": \"\",\n+            \"taxonName\": \"\",\n+            \"before\": \"\",\n+            \"after\": \"\",\n+            \"target\": \"\",\n+            \"lowerBound\": \"\",\n+            \"upperBound\": \"\"\n+          }\n+        ]\n+      }\n+    ],\n+    \"riskContributions\": [\n+      {\n+        \"rank\": \"\",\n+        \"taxonomyId\": \"\",\n+        \"taxonomyName\": \"\",\n+        \"taxons\": [\n+          {\n+            \"rank\": \"\",\n+            \"taxonId\": \"\",\n+            \"taxonName\": \"\",\n+            \"before\": \"\",\n+            \"after\": \"\"\n+          }\n+        ]\n+      }\n+    ],\n+    \"stressTests\": [\n+      {\n+        \"id\": \"\",\n+        \"name\": \"\",\n+        \"description\": \"\",\n+        \"startDate\": \"\",\n+        \"endDate\": \"\",\n+        \"before\": \"\",\n+        \"after\": \"\"\n+      }\n+    ],\n+    \"kpis\": [\n+      {\n+        \"id\": \"\",\n+        \"before\": \"\",\n+        \"after\": \"\"\n+      }\n+    ],\n+    \"riskMetrics\": [\n+      {\n+        \"name\": \"\",\n+        \"before\": \"\",\n+        \"after\": \"\"\n+      }\n+    ],\n+    \"constraintGroups\": [\n+      {\n+        \"id\": \"\",\n+        \"name\": \"\",\n+        \"justification\": {\n+          \"text\": \"\",\n+          \"scope\": \"\",\n+          \"expiry\": \"\"\n+        },\n+        \"constraints\": [\n+          {\n+            \"id\": \"\",\n+            \"type\": \"\",\n+            \"name\": \"\",\n+            \"modelValue\": \"\",\n+            \"observedValueAfter\": \"\",\n+            \"observedValueBefore\": \"\",\n+            \"observedValueType\": \"\",\n+            \"lowerBound\": \"\",\n+            \"upperBound\": \"\",\n+            \"hasKnowledge\": \"\",\n+            \"hasExperience\": \"\",\n+            \"validationMode\": \"\",\n+            \"scope\": \"\",\n+            \"respectedAfter\": \"\",\n+            \"respectedBefore\": \"\",\n+            \"assets\": [\n+              {\n+                \"id\": \"\",\n+                \"isin\": \"\",\n+                \"name\": \"\"\n+              }\n+            ],\n+            \"categoryIds\": [],\n+            \"groupingStrategy\": \"\",\n+            \"justification\": \"\"\n+          }\n+        ]\n+      }\n+    ]\n+  }\n+}\n\\ No newline at end of file\n"}}
{"type":"log","timestamp":1699006816903,"level":"info","message":"Starting rendering request 194","meta":{"rootId":"flbo8o8h19yxahn","id":"flbo8o8h19yxahn"},"id":"pvo7s8juwoqemxh","previousOperationId":"s13f9wnp1wbf95j"}
{"type":"log","timestamp":1699006816904,"level":"info","message":"Rendering template { name: proposed-portfolio, recipe: html, engine: handlebars, preview: true }","meta":{"rootId":"flbo8o8h19yxahn","id":"flbo8o8h19yxahn"},"id":"467d5tmy2u6jjp4","previousOperationId":"s13f9wnp1wbf95j"}
{"type":"log","timestamp":1699006816905,"level":"debug","message":"Inline data specified.","meta":{"rootId":"flbo8o8h19yxahn","id":"flbo8o8h19yxahn"},"id":"wda49aft2s5w5tm","previousOperationId":"s13f9wnp1wbf95j"}
{"type":"log","timestamp":1699006816911,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"flbo8o8h19yxahn","id":"flbo8o8h19yxahn"},"id":"7wt0tmpejk7qt8c","previousOperationId":"s13f9wnp1wbf95j"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1699006816911,"id":"27z3syshycqc7bm","previousEventId":"ympka34kqmmylz8","operationId":"itr63fadugu852o","previousOperationId":"s13f9wnp1wbf95j","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n@@ -1,1 +1,1 @@\n-{}\n\\ No newline at end of file\n+{\"reportName\":\"proposed-portfolio\",\"headers\":{}}\n\\ No newline at end of file\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n@@ -16,3 +16,0 @@\n-    \"@odata.context\": \"http://localhost:5488/odata/$metadata#templates/$entity\",\n-    \"@odata.editLink\": \"http://localhost:5488/odata/templates('4j4EqiEMIe2KTNLJ')\",\n-    \"@odata.id\": \"http://localhost:5488/odata/templates('4j4EqiEMIe2KTNLJ')\",\n@@ -21,0 +18,1 @@\n+    \"_id\": \"4j4EqiEMIe2KTNLJ\",\n@@ -22,1 +20,5 @@\n-    \"helpers\": \"const jsreport = require('jsreport-proxy')\\r\\nawait jsreport.assets.registerHelpers('mainHelper.js')\\r\\n\\r\\n// function getStatusClass(status) {\\r\\n//     // if (status == 'updated') return 'statustag success';\\r\\n//     if (['new', 'increased'].includes(status)) return 'statustag success';\\r\\n//     if (['sold', 'decreased'].includes(status)) return 'statustag error';\\r\\n// }\\r\\n\\r\\nHandlebars.registerHelper(\\\"getStatusClass\\\", function(status) {\\r\\n    if (['new', 'increased'].includes(status)) return \\\"statustag success\\\";\\r\\n    if (['sold', 'decreased'].includes(status)) return \\\"statustag error\\\";\\r\\n});\"\n+    \"helpers\": \"const jsreport = require('jsreport-proxy')\\r\\nawait jsreport.assets.registerHelpers('mainHelper.js')\\r\\n\\r\\n// function getStatusClass(status) {\\r\\n//     // if (status == 'updated') return 'statustag success';\\r\\n//     if (['new', 'increased'].includes(status)) return 'statustag success';\\r\\n//     if (['sold', 'decreased'].includes(status)) return 'statustag error';\\r\\n// }\\r\\n\\r\\nHandlebars.registerHelper(\\\"getStatusClass\\\", function(status) {\\r\\n    if (['new', 'increased'].includes(status)) return \\\"statustag success\\\";\\r\\n    if (['sold', 'decreased'].includes(status)) return \\\"statustag error\\\";\\r\\n});\",\n+    \"@odata.context\": \"http://localhost:5488/odata/$metadata#templates/$entity\",\n+    \"@odata.editLink\": \"http://localhost:5488/odata/templates('4j4EqiEMIe2KTNLJ')\",\n+    \"@odata.id\": \"http://localhost:5488/odata/templates('4j4EqiEMIe2KTNLJ')\",\n+    \"scripts\": []\n"}}
{"type":"log","timestamp":1699006816912,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"flbo8o8h19yxahn","id":"flbo8o8h19yxahn"},"id":"gv2q8adgubi8e09","previousOperationId":"itr63fadugu852o"}
{"type":"log","timestamp":1699006816935,"level":"warn","message":"Error when processing render request 194\n(because) error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) toUpperCase doesn't match each - 34:54\nError: toUpperCase doesn't match each - 34:54\n    at validateClose (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\helpers.js:28:11)\n    at Object.prepareBlock (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\helpers.js:142:5)\n    at Object.anonymous (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\parser.js:65:33)\n    at Parser.parse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\parser.js:367:48)\n    at parseWithoutProcessing (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\base.js:46:33)\n    at HandlebarsEnvironment.parse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\base.js:52:13)\n    at Object.precompile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\compiler.js:485:17)\n    at hb.precompile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars.js:42:40)\n    at Object.compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:34:52)\n    at Object.compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:26:43)\nwrapped by:\nError: Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) toUpperCase doesn't match each - 34:54\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","meta":{"rootId":"flbo8o8h19yxahn","id":"flbo8o8h19yxahn"},"id":"7tfxjwc274rga4r","previousOperationId":"itr63fadugu852o"}
{"type":"log","timestamp":1699006816935,"level":"warn","message":"Rendering request 194 finished with error in 42 ms","meta":{"rootId":"flbo8o8h19yxahn","id":"flbo8o8h19yxahn"},"id":"0mym6733nznm78c","previousOperationId":"itr63fadugu852o"}
{"type":"error","timestamp":1699006816942,"entity":{"shortid":"WnivzR9ur","name":"proposed-portfolio","content":"{{!-- <!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    \r\n</head> --}}\r\n{{!-- <body> --}}\r\n    <style>\r\n        {{asset \"../styles/main.css\"}}\r\n    </style>\r\n    <table border=\"1\">\r\n        <thead>\r\n            <tr>\r\n                <th>Asset</th>\r\n                <th>ISIN</th>\r\n                <th>Currency</th>\r\n                <th>Status</th>\r\n                <th>Quantity</th>\r\n                <th>Price</th>\r\n                <th>Market Value</th>\r\n                <th>Weight</th>\r\n                <th>Outside of Universe</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {{#each proposal.positions}}\r\n            <!-- Add your data rows here -->\r\n            <tr>\r\n                <td>{{asset.name}}</td>\r\n                <td>{{asset.isin}}</td>\r\n                <td>{{asset.currency}}</td>\r\n                {{!-- TODO: ask them how to combine classes - one always and other under condition --}}\r\n                <td><div class='statustag success'>{{#toUpperCase status}}</div></td>\r\n                <td>{{quantity}}</td>\r\n                <td>{{assetPriceInPositionCurrency.value}}</td>\r\n                <td>{{marketValue}}</td>\r\n                <td>10.00%</td>\r\n                <td>No</td>\r\n            </tr>\r\n            {{/each}}\r\n            <!-- Add more data rows as needed -->\r\n        </tbody>\r\n    </table>\r\n{{!-- </body> --}}\r\n{{!-- </html> --}}\r\n"},"lineNumber":34,"property":"content","statusCode":400,"weak":true,"logged":true,"previousOperationId":"itr63fadugu852o","id":"93q9td0spm8obz2","stack":"Error: toUpperCase doesn't match each - 34:54\n    at validateClose (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\helpers.js:28:11)\n    at Object.prepareBlock (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\helpers.js:142:5)\n    at Object.anonymous (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\parser.js:65:33)\n    at Parser.parse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\parser.js:367:48)\n    at parseWithoutProcessing (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\base.js:46:33)\n    at HandlebarsEnvironment.parse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\base.js:52:13)\n    at Object.precompile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\compiler.js:485:17)\n    at hb.precompile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\handlebars\\dist\\cjs\\handlebars.js:42:40)\n    at Object.compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:34:52)\n    at Object.compile (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:26:43)\nwrapped by:\nError: Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) toUpperCase doesn't match each - 34:54\n    at module.exports (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:308:33)\n    at async engine.engine (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (D:\\Projects\\investment-proposal_jsreport\\investment-proposal\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","message":"Error when evaluating engine handlebars for template /templates/proposed-portfolio\n(because) toUpperCase doesn't match each - 34:54"}
